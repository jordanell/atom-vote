<div class="poll-form-wrapper">
  <%= simple_form_for(@poll) do |f| %>
    <% if @poll.errors.full_messages.length > 0 %>
      <div class="errors-wrapper">
        <h5>Your poll had the following errors:</h5>
        <ul>
          <% @poll.errors.full_messages.each do |msg| %>
            <li><%= msg %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <%= f.simple_fields_for :questions, @poll.questions.build do |q| %>
      <%= q.input :title, label: 'Poll Question', placeholder: 'Type your question here, options below' %>

      <% (1..4).each do |index| %>
        <%= q.simple_fields_for :choices, q.object.choices.build do |c| %>
          <span class="choice-label"><%= "#{index}." %></span>
          <%= c.input :title, label: 'Poll Option', placeholder: 'Enter poll option' %>
        <% end %>
      <% end %>
    <% end %>

    <%= f.button :submit %>
  <% end %>
</div>
