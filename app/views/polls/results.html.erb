<!-- Render the sharing options -->
<%= render partial: 'polls/share' %>

<!-- Render the poll results -->
<div class="poll-results-wrapper">
  <div class="poll-data">
    <h2>
      <%= @poll.question %>
    </h2>

    <!-- Render the voting results -->
    <% @poll.options.each do |option| %>
      <div class="option-result">
        <span class="option-text"><%= option.text %></span>
        <div class="option-stats">
          <span id="option_<%= option.id %>_count" class="option-count"><%= option.votes.size %> votes</span>
          <span id="option_<%= option.id %>_percentage" class="option-percentage">(<%= option.percentage_of_votes %>%)</span>
        </div>
      </div>
    <% end %>
  </div>
  <div class="poll-meta">
    <h4>Total Votes</h4>
    <p>
      <%= @poll.votes.size %>
    </p>
    <h4>Last Vote</h4>
    <p>
      <% if @poll.votes.size > 0 %>
        <%= time_ago_in_words(@poll.votes.last.created_at) %>
      <% else %>
        Never
      <% end %>
    </p>
  </div>
</div>